<!-- templates/music/producer_dashboard.html -->
{% extends "music/base.html" %}
{% block title %}–ö–∞–±—ñ–Ω–µ—Ç –ø—Ä–æ–¥—é—Å–µ—Ä–∞ - MusicHub{% endblock %}

{% block extra_css %}
<style>
    .dashboard-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
    }

    .welcome-section {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: 3rem;
        border-radius: 20px;
        margin-bottom: 2rem;
        box-shadow: 0 10px 40px rgba(240, 147, 251, 0.3);
    }

    .welcome-section h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
    }

    .welcome-section p {
        font-size: 1.2rem;
        opacity: 0.95;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        transition: all 0.3s ease;
        border-left: 5px solid #f093fb;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    .stat-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .stat-label {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }

    .stat-value {
        font-size: 2rem;
        font-weight: bold;
        color: #333;
    }

    .actions-section {
        margin-bottom: 2rem;
    }

    .section-title {
        font-size: 1.8rem;
        color: #333;
        margin-bottom: 1.5rem;
        font-weight: 700;
    }

    .actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
    }

    .action-card {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        text-align: center;
        transition: all 0.3s ease;
        border: 2px solid transparent;
    }

    .action-card:hover {
        border-color: #f093fb;
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(240, 147, 251, 0.15);
    }

    .action-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }

    .action-card h3 {
        color: #f093fb;
        margin-bottom: 0.8rem;
        font-size: 1.3rem;
    }

    .action-card p {
        color: #666;
        margin-bottom: 1.5rem;
        line-height: 1.5;
    }

    .action-btn {
        display: inline-block;
        padding: 0.8rem 2rem;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        text-decoration: none;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
    }

    .projects-section {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        margin-bottom: 2rem;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .btn-primary {
        padding: 0.8rem 2rem;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        text-decoration: none;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
    }

    .project-item {
        padding: 1.5rem;
        border: 2px solid #f0f0f0;
        border-radius: 12px;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
    }

    .project-item:hover {
        border-color: #f093fb;
        box-shadow: 0 5px 15px rgba(240, 147, 251, 0.1);
    }

    .project-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .project-title {
        font-size: 1.2rem;
        color: #333;
        font-weight: 600;
    }

    .project-status {
        padding: 0.4rem 1rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
    }

    .status-active {
        background: #d4edda;
        color: #155724;
    }

    .status-pending {
        background: #fff3cd;
        color: #856404;
    }

    .status-recording {
        background: #cce5ff;
        color: #004085;
    }

    .status-mixing {
        background: #e2d9f3;
        color: #5a2d82;
    }

    .project-details {
        color: #666;
        font-size: 0.95rem;
        line-height: 1.6;
    }

    .project-details p {
        margin-bottom: 0.5rem;
    }

    .beats-section {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
    }

    .beats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-top: 1.5rem;
    }

    .beat-card {
        background: #f8f9fa;
        border-radius: 12px;
        overflow: hidden;
        transition: all 0.3s ease;
        cursor: pointer;
        text-decoration: none;
        display: block;
    }

    .beat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .beat-cover {
        height: 150px;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
    }

    .beat-info {
        padding: 1rem;
    }

    .beat-name {
        font-weight: 600;
        color: #333;
        margin-bottom: 0.3rem;
    }

    .beat-stats {
        color: #999;
        font-size: 0.85rem;
    }

    .empty-state {
        text-align: center;
        padding: 3rem 2rem;
        color: #999;
    }

    .empty-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
    }

    @media (max-width: 768px) {
        .dashboard-container {
            padding: 1rem;
        }

        .welcome-section h1 {
            font-size: 2rem;
        }

        .project-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Welcome Section -->
    <div class="welcome-section">
        <h1>üéöÔ∏è –í—ñ—Ç–∞—î–º–æ, {{ user.stage_name|default:user.username }}!</h1>
        <p>–ö–µ—Ä—É–π—Ç–µ —Å–≤–æ—ó–º–∏ –±—ñ—Ç–∞–º–∏ —Ç–∞ —Å–ø—ñ–≤–ø—Ä–∞—Ü—è–º–∏</p>
    </div>

    <!-- Statistics -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üéπ</div>
            <div class="stat-label">–ë—ñ—Ç—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–æ</div>
            <div class="stat-value">{{ total_beats }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ü§ù</div>
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤</div>
            <div class="stat-value">{{ total_collabs }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">‚ñ∂Ô∏è</div>
            <div class="stat-label">–ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω—å</div>
            <div class="stat-value">{{ total_plays }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-label">–°–ø—ñ–≤–ø—Ä–∞—Ü—å</div>
            <div class="stat-value">{{ total_collabs }}</div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="actions-section">
        <h2 class="section-title">–®–≤–∏–¥–∫—ñ –¥—ñ—ó</h2>
        <div class="actions-grid">
            <div class="action-card">
                <div class="action-icon">üéπ</div>
                <h3>–°—Ç–≤–æ—Ä–∏—Ç–∏ –±—ñ—Ç</h3>
                <p>–î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π –±—ñ—Ç –¥–æ –ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ</p>
                <a href="{% url 'music:beat_create' %}" class="action-btn">–°—Ç–≤–æ—Ä–∏—Ç–∏</a>
            </div>
            <div class="action-card">
                <div class="action-icon">üìÄ</div>
                <h3>–ú–æ—ó –±—ñ—Ç–∏</h3>
                <p>–ö–µ—Ä—É–π—Ç–µ —Å–≤–æ—ó–º–∏ –±—ñ—Ç–∞–º–∏</p>
                <a href="{% url 'music:beat_list' %}" class="action-btn">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</a>
            </div>
            <div class="action-card">
                <div class="action-icon">ü§ù</div>
                <h3>–ù–æ–≤–∞ —Å–ø—ñ–≤–ø—Ä–∞—Ü—è</h3>
                <p>–†–æ–∑–ø–æ—á–Ω—ñ—Ç—å –ø—Ä–æ—î–∫—Ç –∑ –∞—Ä—Ç–∏—Å—Ç–æ–º</p>
                <a href="{% url 'music:collaboration_create' %}" class="action-btn">–°—Ç–≤–æ—Ä–∏—Ç–∏</a>
            </div>
            <div class="action-card">
                <div class="action-icon">üìÅ</div>
                <h3>–ú–æ—ó –ø—Ä–æ—î–∫—Ç–∏</h3>
                <p>–ö–µ—Ä—É–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–∏–º–∏ —Å–ø—ñ–≤–ø—Ä–∞—Ü—è–º–∏</p>
                <a href="{% url 'music:collaboration_list' %}" class="action-btn">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</a>
            </div>
            <div class="action-card">
                <div class="action-icon">üë§</div>
                <h3>–ü—Ä–æ—Ñ—ñ–ª—å</h3>
                <p>–†–µ–¥–∞–≥—É–π—Ç–µ —Å–≤–æ—î –ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ</p>
                <a href="{% url 'music:profile' %}" class="action-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
            </div>
        </div>
    </div>

    <!-- Active Projects -->
    <div class="projects-section">
        <div class="section-header">
            <h2 class="section-title">–ê–∫—Ç–∏–≤–Ω—ñ –ø—Ä–æ—î–∫—Ç–∏</h2>
            <a href="{% url 'music:collaboration_list' %}" class="btn-primary">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ</a>
        </div>
        
        {% if active_projects %}
            {% for collab in active_projects %}
            <div class="project-item">
                <div class="project-header">
                    <div class="project-title">üéµ {{ collab.project_name }}</div>
                    <span class="project-status status-{{ collab.status }}">
                        {{ collab.get_status_display }}
                    </span>
                </div>
                <div class="project-details">
                    <p><strong>–ê—Ä—Ç–∏—Å—Ç:</strong> {{ collab.artist.stage_name|default:collab.artist.username }}</p>
                    {% if collab.beat %}
                    <p><strong>–ë—ñ—Ç:</strong> {{ collab.beat.title }}</p>
                    {% endif %}
                    {% if collab.deadline %}
                    <p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> {{ collab.deadline|date:"d.m.Y" }}</p>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">üìÅ</div>
            <p>–£ –≤–∞—Å –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤</p>
            <a href="{% url 'music:collaboration_create' %}" class="btn-primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç</a>
        </div>
        {% endif %}
    </div>

    <!-- My Beats -->
    <div class="beats-section">
        <div class="section-header">
            <h2 class="section-title">–ú–æ—ó –±—ñ—Ç–∏</h2>
            <a href="{% url 'music:beat_list' %}" class="btn-primary">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ</a>
        </div>
        
        {% if recent_beats %}
        <div class="beats-grid">
            {% for beat in recent_beats %}
            <a href="{% url 'music:beat_detail' beat.pk %}" class="beat-card">
                <div class="beat-cover" style="background: linear-gradient(135deg, 
                    {% cycle '#f093fb 0%, #f5576c 100%' '#667eea 0%, #764ba2 100%' '#43e97b 0%, #38f9d7 100%' '#fa709a 0%, #fee140 100%' '#ff9a9e 0%, #fecfef 100%' '#a8edea 0%, #fed6e3 100%' %});">
                    üéπ
                </div>
                <div class="beat-info">
                    <div class="beat-name">{{ beat.title }}</div>
                    <div class="beat-stats">{{ beat.bpm }} BPM ‚Ä¢ {{ beat.plays_count }} –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω—å</div>
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">üéπ</div>
            <p>–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –±—ñ—Ç—ñ–≤</p>
            <a href="{% url 'music:beat_create' %}" class="btn-primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–µ—Ä—à–∏–π –±—ñ—Ç</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}