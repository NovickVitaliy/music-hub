<!-- templates/music/manager_dashboard.html -->
{% extends "music/base.html" %}
{% block title %}–ö–∞–±—ñ–Ω–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞ - MusicHub{% endblock %}

{% block extra_css %}
<style>
    .dashboard-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
    }

    .welcome-section {
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        color: white;
        padding: 3rem;
        border-radius: 20px;
        margin-bottom: 2rem;
        box-shadow: 0 10px 40px rgba(250, 112, 154, 0.3);
    }

    .welcome-section h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
    }

    .welcome-section p {
        font-size: 1.2rem;
        opacity: 0.95;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        transition: all 0.3s ease;
        border-left: 5px solid #fa709a;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    .stat-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .stat-label {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }

    .stat-value {
        font-size: 2rem;
        font-weight: bold;
        color: #333;
    }

    .actions-section {
        margin-bottom: 2rem;
    }

    .section-title {
        font-size: 1.8rem;
        color: #333;
        margin-bottom: 1.5rem;
        font-weight: 700;
    }

    .actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
    }

    .action-card {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        text-align: center;
        transition: all 0.3s ease;
        border: 2px solid transparent;
    }

    .action-card:hover {
        border-color: #fa709a;
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(250, 112, 154, 0.15);
    }

    .action-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }

    .action-card h3 {
        color: #fa709a;
        margin-bottom: 0.8rem;
        font-size: 1.3rem;
    }

    .action-card p {
        color: #666;
        margin-bottom: 1.5rem;
        line-height: 1.5;
    }

    .action-btn {
        display: inline-block;
        padding: 0.8rem 2rem;
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        color: white;
        text-decoration: none;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(250, 112, 154, 0.4);
    }

    .artists-section {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        margin-bottom: 2rem;
    }

    .artist-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-top: 1.5rem;
    }

    .artist-card {
        background: #f8f9fa;
        padding: 1.5rem;
        border-radius: 12px;
        transition: all 0.3s ease;
        border: 2px solid transparent;
    }

    .artist-card:hover {
        border-color: #fa709a;
        transform: translateY(-3px);
    }

    .artist-info {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .artist-avatar {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
    }

    .artist-details h4 {
        color: #333;
        margin-bottom: 0.3rem;
        font-weight: 600;
    }

    .artist-details p {
        color: #999;
        font-size: 0.85rem;
    }

    .artist-stats {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }

    .contracts-section {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .btn-primary {
        padding: 0.8rem 2rem;
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        color: white;
        text-decoration: none;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(250, 112, 154, 0.4);
    }

    .contract-item {
        padding: 1.5rem;
        border: 2px solid #f0f0f0;
        border-radius: 12px;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
    }

    .contract-item:hover {
        border-color: #fa709a;
        box-shadow: 0 5px 15px rgba(250, 112, 154, 0.1);
    }

    .contract-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .contract-title {
        font-size: 1.2rem;
        color: #333;
        font-weight: 600;
    }

    .contract-status {
        padding: 0.4rem 1rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
    }

    .status-active {
        background: #d4edda;
        color: #155724;
    }

    .status-expiring {
        background: #fff3cd;
        color: #856404;
    }

    .status-pending {
        background: #f8d7da;
        color: #721c24;
    }

    .contract-details {
        color: #666;
        font-size: 0.95rem;
        line-height: 1.8;
    }

    .contract-details strong {
        color: #333;
    }

    .contract-actions {
        margin-top: 1rem;
        display: flex;
        gap: 0.5rem;
    }

    .btn-small {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        text-decoration: none;
        font-size: 0.85rem;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .btn-view {
        background: #fa709a;
        color: white;
    }

    .btn-view:hover {
        background: #e85d86;
    }

    .btn-edit {
        background: #667eea;
        color: white;
    }

    .btn-edit:hover {
        background: #5568d3;
    }

    .empty-state {
        text-align: center;
        padding: 3rem 2rem;
        color: #999;
    }

    .empty-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
    }

    @media (max-width: 768px) {
        .dashboard-container {
            padding: 1rem;
        }

        .welcome-section h1 {
            font-size: 2rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Welcome Section -->
    <div class="welcome-section">
        <h1>üè¢ –í—ñ—Ç–∞—î–º–æ, {{ user.username }}!</h1>
        <p>–ö–µ—Ä—É–π—Ç–µ —Å–≤–æ—ó–º –ª–µ–π–±–ª–æ–º —Ç–∞ –∞—Ä—Ç–∏—Å—Ç–∞–º–∏</p>
    </div>

    <!-- Statistics -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-label">–ê—Ä—Ç–∏—Å—Ç—ñ–≤ –ø—ñ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º</div>
            <div class="stat-value">{{ total_artists }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üíø</div>
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω–∏—Ö —Ä–µ–ª—ñ–∑—ñ–≤</div>
            <div class="stat-value">{{ total_releases }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üìÑ</div>
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤</div>
            <div class="stat-value">{{ active_contracts_count }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üéµ</div>
            <div class="stat-label">–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç—Ä–µ–∫—ñ–≤</div>
            <div class="stat-value">{{ total_tracks }}</div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="actions-section">
        <h2 class="section-title">–®–≤–∏–¥–∫—ñ –¥—ñ—ó</h2>
        <div class="actions-grid">
            <div class="action-card">
                <div class="action-icon">‚úçÔ∏è</div>
                <h3>–ù–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç</h3>
                <p>–£–∫–ª–∞—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∑ –∞—Ä—Ç–∏—Å—Ç–æ–º</p>
                <a href="{% url 'music:contract_create' %}" class="action-btn">–°—Ç–≤–æ—Ä–∏—Ç–∏</a>
            </div>
            <div class="action-card">
                <div class="action-icon">üìã</div>
                <h3>–ú–æ—ó –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏</h3>
                <p>–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏</p>
                <a href="{% url 'music:contract_list' %}" class="action-btn">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</a>
            </div>
            <div class="action-card">
                <div class="action-icon">üîç</div>
                <h3>–ü–æ—à—É–∫ —Ç–∞–ª–∞–Ω—Ç—ñ–≤</h3>
                <p>–ó–Ω–∞–π–¥—ñ—Ç—å –Ω–æ–≤–∏—Ö –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∏—Ö –∞—Ä—Ç–∏—Å—Ç—ñ–≤</p>
                <a href="{% url 'music:artist_search' %}" class="action-btn">–®—É–∫–∞—Ç–∏</a>
            </div>
            <div class="action-card">
                <div class="action-icon">üíº</div>
                <h3>–ü–æ—Ä—Ç—Ñ–æ–ª—ñ–æ –ª–µ–π–±–ª—É</h3>
                <p>–†–µ–¥–∞–≥—É–π—Ç–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ª–µ–π–±–ª</p>
                <a href="{% url 'music:profile' %}" class="action-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
            </div>
        </div>
    </div>

    <!-- Artists Under Contract -->
    {% if managed_artists %}
    <div class="artists-section">
        <h2 class="section-title">–ê—Ä—Ç–∏—Å—Ç–∏ –ª–µ–π–±–ª—É</h2>
        <div class="artist-grid">
            {% for artist in managed_artists %}
            <div class="artist-card">
                <div class="artist-info">
                    <div class="artist-avatar" style="background: linear-gradient(135deg, 
                        {% cycle '#667eea 0%, #764ba2 100%' '#f093fb 0%, #f5576c 100%' '#43e97b 0%, #38f9d7 100%' '#fa709a 0%, #fee140 100%' %});">
                        üé§
                    </div>
                    <div class="artist-details">
                        <h4>{{ artist.stage_name|default:artist.username }}</h4>
                        <p>{{ artist.bio|truncatewords:5|default:"–ê—Ä—Ç–∏—Å—Ç" }}</p>
                    </div>
                </div>
                <div class="artist-stats">
                    üíø –ê–ª—å–±–æ–º—ñ–≤: {{ artist.albums_count }}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Recent Contracts -->
    <div class="contracts-section">
        <div class="section-header">
            <h2 class="section-title">–û—Å—Ç–∞–Ω–Ω—ñ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏</h2>
            <a href="{% url 'music:contract_list' %}" class="btn-primary">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ</a>
        </div>
        
        {% if recent_contracts %}
            {% for contract in recent_contracts %}
            <div class="contract-item">
                <div class="contract-header">
                    <div class="contract-title">
                        üìÑ {{ contract.artist.stage_name|default:contract.artist.username }}
                    </div>
                    <span class="contract-status status-{{ contract.status }}">
                        {{ contract.get_status_display }}
                    </span>
                </div>
                <div class="contract-details">
                    <p><strong>–¢–∏–ø:</strong> {{ contract.get_contract_type_display }}</p>
                    <p><strong>–¢–µ—Ä–º—ñ–Ω:</strong> {{ contract.duration_months }} –º—ñ—Å—è—Ü—ñ–≤ 
                        {% if contract.status != 'pending' %}
                            (–∑–∞–ª–∏—à–∏–ª–æ—Å—å {{ contract.months_remaining }} –º—ñ—Å.)
                        {% endif %}
                    </p>
                    <p><strong>–†–æ—è–ª—Ç—ñ:</strong> {{ contract.artist_royalty_percent }}% –∞—Ä—Ç–∏—Å—Ç—É / {{ contract.label_royalty_percent }}% –ª–µ–π–±–ª—É</p>
                    <p><strong>–î–∞—Ç–∞ –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è:</strong> {{ contract.start_date|date:"d.m.Y" }}</p>
                </div>
                <div class="contract-actions">
                    <a href="{% url 'music:contract_detail' contract.pk %}" class="btn-small btn-view">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</a>
                    <a href="{% url 'music:contract_update' contract.pk %}" class="btn-small btn-edit">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                </div>
            </div>
            {% endfor %}
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">üìÑ</div>
            <p>–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤</p>
            <a href="{% url 'music:contract_create' %}" class="btn-primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–µ—Ä—à–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}